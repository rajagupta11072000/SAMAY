<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>SAMAY 2.0 ‚Äî Legendary Time Engine</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
:root {
  --bg: #0d0d0d;
  --fg: #ffffff;
  --accent: #ffcc00;
  --card: #1a1a1a;
  --vedic-bg: #f2e5c4;
  --vedic-fg: #3a2500;
  --vedic-accent: #b8860b;
}

body {
  margin:0;
  font-family: 'Poppins', sans-serif;
  background: var(--bg);
  color: var(--fg);
  transition: 0.4s;
}

header {
  text-align:center;
  padding:20px;
  font-size:2rem;
  font-weight:600;
  letter-spacing:2px;
  color: var(--accent);
}

.container {
  width: 90%;
  max-width:900px;
  margin:auto;
}

.card {
  background: var(--card);
  padding:20px;
  margin:20px 0;
  border-radius:12px;
  box-shadow: 0 0 10px #000;
}

/* CLOCK */
.big-clock {
  font-size:3rem;
  text-align:center;
  margin:20px 0;
  letter-spacing:3px;
}

.date {
  text-align:center;
  margin-top:-10px;
  opacity:0.8;
}

/* Buttons */
.btn {
  background: var(--accent);
  color:#000;
  padding:10px 20px;
  border:none;
  border-radius:8px;
  cursor:pointer;
  margin:10px 5px;
  font-weight:600;
}

.btn:hover { opacity:0.8; }

/* Theme Toggle */
#themeToggle {
  float:right;
  margin-top:-55px;
}
</style>

</head>
<body>

<header>SAMAY 2.0 ‚Äî ‡§Æ‡§π‡§æ‡§ï‡§æ‡§≤ ‡§ï‡§æ ‡§∏‡§Æ‡§Ø</header>

<button id="themeToggle" class="btn">Switch Theme</button>

<div class="container">

  <div class="card">
    <div id="clock" class="big-clock">00:00:00</div>
    <div id="date" class="date"></div>
  </div>

  <div class="card">
    <h2>‚è± Live Features (Part‚Äì1 Ready)</h2>
    <ul>
      <li>Real-Time Ultra Clock Engine</li>
      <li>Dual Theme ‚Äì Modern Neon + Vedic Gold</li>
      <li>High-Precision Time Fetch</li>
      <li>Layout for Panchang & AI Advisor (Coming in Part-2 & 3)</li>
    </ul>
  </div>

  <div class="card">
    <h2>üìå Modules Coming Next (Part‚Äì2)</h2>
    <ul>
      <li>Full Panchang Engine (Tithi, Nakshatra, Yoga, Karan)</li>
      <li>Sunrise / Sunset Calculation</li>
      <li>Rahukaal / Yamaganda / Gulikaal</li>
      <li>Hora System</li>
      <li>Vedic Calendar + Rashis</li>
    </ul>
  </div>

  <div class="card">
    <h2>ü§ñ AI Time Advisor (Part‚Äì3)</h2>
    <ul>
      <li>Shubh-Ashubh Work Timing</li>
      <li>Travel Direction</li>
      <li>Productivity Predictor</li>
      <li>Spiritual Time Recommender</li>
      <li>Trading Best Time Signal (Based on Panchang)</li>
    </ul>
  </div>

</div>

<script>
// CLOCK ENGINE
function updateClock() {
  let now = new Date();
  let h = String(now.getHours()).padStart(2,'0');
  let m = String(now.getMinutes()).padStart(2,'0');
  let s = String(now.getSeconds()).padStart(2,'0');

  document.getElementById("clock").innerHTML = `${h}:${m}:${s}`;

  let options = { weekday:'long', year:'numeric', month:'long', day:'numeric' };
  document.getElementById("date").innerHTML = now.toLocaleDateString('en-IN', options);
}
setInterval(updateClock,1000);
updateClock();

// THEME SWITCHER
let vedic = false;
document.getElementById("themeToggle").onclick = () => {
  vedic = !vedic;

  if(vedic){
    document.body.style.background = "var(--vedic-bg)";
    document.body.style.color = "var(--vedic-fg)";
  } else {
    document.body.style.background = "var(--bg)";
    document.body.style.color = "var(--fg)";
  }
};
</script>

</body>
</html>
<!--  ----------  PANCHANG ENGINE START  ----------  -->

<script>
// -----------------------------
//  ASTRONOMY CORE FUNCTIONS
// -----------------------------
function toJulian(date) {
    return (date / 86400000) + 2440587.5;
}
function degToRad(d){ return d * Math.PI / 180; }
function radToDeg(r){ return r * 180 / Math.PI; }

// Solar longitude
function getSunLongitude(jd) {
    let n = jd - 2451545.0;
    let L = (280.460 + 0.9856474 * n) % 360;
    let g = (357.528 + 0.9856003 * n) % 360;
    let lambda = L + 1.915 * Math.sin(degToRad(g)) + 0.020 * Math.sin(2 * degToRad(g));
    return lambda % 360;
}

// Lunar longitude
function getMoonLongitude(jd) {
    let n = jd - 2451545.0;
    let L = (218.316 + 13.176396 * n) % 360;
    let M = (134.963 + 13.064993 * n) % 360;
    let F = (93.272 + 13.229350 * n) % 360;

    let lambda = L 
        + 6.289 * Math.sin(degToRad(M))
        + 1.274 * Math.sin(degToRad(2 * L - M))
        + 0.658 * Math.sin(degToRad(2 * L))
        + 0.214 * Math.sin(degToRad(2 * M))
        - 0.186 * Math.sin(degToRad(134));

    return lambda % 360;
}

// -----------------------------
//       TITHI CALCULATION
// -----------------------------
function getTithi(jd) {
    let sun = getSunLongitude(jd);
    let moon = getMoonLongitude(jd);

    let diff = (moon - sun + 360) % 360;
    let tithi = Math.floor(diff / 12);

    let names = [
        "Pratipada", "Dvitiya", "Tritiya", "Chaturthi", "Panchami", "Shashthi",
        "Saptami", "Ashtami", "Navami", "Dashami", "Ekadashi", "Dwadashi",
        "Trayodashi", "Chaturdashi", "Purnima / Amavasya"
    ];

    return names[tithi];
}

// -----------------------------
//    NAKSHATRA CALCULATION
// -----------------------------
function getNakshatra(jd) {
    let moon = getMoonLongitude(jd);
    let nak = Math.floor((moon % 360) / (360/27));

    let names = [
        "Ashwini","Bharani","Krittika","Rohini","Mrigashirsha","Ardra","Punarvasu",
        "Pushya","Ashlesha","Magha","Purva Phalguni","Uttara Phalguni","Hasta",
        "Chitra","Swati","Vishakha","Anuradha","Jyeshtha","Mula","Purva Ashadha",
        "Uttara Ashadha","Shravana","Dhanishta","Shatabhisha","Purva Bhadrapada",
        "Uttara Bhadrapada","Revati"
    ];

    return names[nak];
}

// -----------------------------
//   YOGA CALCULATION
// -----------------------------
function getYoga(jd) {
    let sun = getSunLongitude(jd);
    let moon = getMoonLongitude(jd);

    let total = (sun + moon) % 360;
    let yoga = Math.floor(total / (360/27));

    let names = [
        "Vishkambha","Priti","Ayushman","Saubhagya","Shobhana","Atiganda","Sukarma",
        "Dhriti","Shoola","Ganda","Vriddhi","Dhruva","Vyaghata","Harshana",
        "Vajra","Siddhi","Vyatipata","Variyan","Parigha","Shiva","Siddha",
        "Sadhya","Shubha","Shukla","Brahma","Indra","Vaidhriti"
    ];

    return names[yoga];
}

// -----------------------------
//   KARANA CALCULATION
// -----------------------------
function getKarana(jd) {
    let sun = getSunLongitude(jd);
    let moon = getMoonLongitude(jd);

    let diff = (moon - sun + 360) % 360;
    let t = diff / 6; // 6-degree = 1 karana
    let kar = Math.floor(t % 60);

    let names = [
        "Bava","Balava","Kaulava","Taitila","Garaja","Vanija","Vishti",
        "Shakuni","Chatushpada","Naga","Kimstughna"
    ];

    return names[kar % 11];
}

// -----------------------------
//   SUNRISE/SUNSET BASIC MODEL
// -----------------------------
function calcSunrise(lat, lon) {
    return "06:12 AM"; // placeholder (Part-3 me full NOAA model add hoga)
}

// -----------------------------
//     PANCHANG MASTER FUNCTION
// -----------------------------
function generatePanchang() {
    let now = new Date();
    let jd = toJulian(now);

    return {
        tithi: getTithi(jd),
        nakshatra: getNakshatra(jd),
        yoga: getYoga(jd),
        karana: getKarana(jd),
        sunrise: calcSunrise(),
        weekday: now.toLocaleDateString("en-IN", { weekday:"long" })
    };
}

// DISPLAY ON SCREEN
function updatePanchangUI() {
    let p = generatePanchang();

    document.getElementById("tithi").innerHTML = p.tithi;
    document.getElementById("nakshatra").innerHTML = p.nakshatra;
    document.getElementById("yoga").innerHTML = p.yoga;
    document.getElementById("karana").innerHTML = p.karana;
    document.getElementById("sunrise").innerHTML = p.sunrise;
    document.getElementById("weekday").innerHTML = p.weekday;
}
setInterval(updatePanchangUI, 2000);
updatePanchangUI();

</script>

<!--  ----------  PANCHANG ENGINE END  ----------  -->

<div class="card">
  <h2>üïâ ‡§Ü‡§ú ‡§ï‡§æ ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§™‡§Ç‡§ö‡§æ‡§Ç‡§ó</h2>
  <p><b>‡§µ‡§æ‡§∞:</b> <span id="weekday"></span></p>
  <p><b>‡§§‡§ø‡§•‡§ø:</b> <span id="tithi"></span></p>
  <p><b>‡§®‡§ï‡•ç‡§∑‡§§‡•ç‡§∞:</b> <span id="nakshatra"></span></p>
  <p><b>‡§Ø‡•ã‡§ó:</b> <span id="yoga"></span></p>
  <p><b>‡§ï‡§∞‡§£:</b> <span id="karana"></span></p>
  <p><b>‡§∏‡•Ç‡§∞‡•ç‡§Ø‡•ã‡§¶‡§Ø:</b> <span id="sunrise"></span></p>
</div>
<!--  ============================
      SAMAY 2.0 ‚Äî PART 3 FINAL 
     Legendary Features Add-On
     ============================ -->

<script>
/* ------------------------------
   NOAA Accurate Sunrise/Sunset
--------------------------------*/
function sunCalc(date, lat, lng) {
    let rad = Math.PI / 180;
    let day = date.getDate();
    let month = date.getMonth() + 1;
    let year = date.getFullYear();

    let N1 = Math.floor(275 * month / 9);
    let N2 = Math.floor((month + 9) / 12);
    let N3 = 1 + Math.floor((year - 4 * Math.floor(year/4) + 2) / 3);
    let N = N1 - (N2 * N3) + day - 30;

    let lngHour = lng / 15;

    function calcSunrise() {
        let t = N + ((6 - lngHour) / 24);
        return sunTime(t, true);
    }

    function calcSunset() {
        let t = N + ((18 - lngHour) / 24);
        return sunTime(t, false);
    }

    function sunTime(t, isRise) {
        let M = (0.9856 * t) - 3.289;
        let L = M + (1.916 * Math.sin(rad*M)) + (0.020 * Math.sin(rad*2*M)) + 282.634;
        L = (L + 360) % 360;

        let RA = radToDeg(Math.atan(0.91764 * Math.tan(rad*L)));
        RA = (RA + 360) % 360;

        let Lquadrant  = Math.floor(L/90) * 90;
        let RAquadrant = Math.floor(RA/90) * 90;
        RA = RA + (Lquadrant - RAquadrant);
        RA /= 15;

        let sinDec = 0.39782 * Math.sin(rad*L);
        let cosDec = Math.cos(Math.asin(sinDec));

        let cosH = (Math.cos(rad*90.833) - (sinDec * Math.sin(rad*lat))) / (cosDec * Math.cos(rad*lat));

        if (cosH > 1) return "Never rises";
        if (cosH < -1) return "Never sets";

        let H = isRise ? 360 - radToDeg(Math.acos(cosH)) : radToDeg(Math.acos(cosH));
        H /= 15;

        let T = H + RA - (0.06571 * t) - 6.622;
        let UT = (T - lngHour + 24) % 24;

        let hr = Math.floor(UT);
        let mn = Math.floor((UT - hr) * 60);

        return `${String(hr).padStart(2,'0')}:${String(mn).padStart(2,'0')}`;
    }

    return {
        sunrise: calcSunrise(),
        sunset: calcSunset()
    };
}

/* ----------------------------------------
   Rahukaal / Yamaganda / Gulikaal
---------------------------------------- */
function getKala(now) {
    let weekday = now.getDay();
    let start = 6; // 6 AM
    let todaySunrise = 6; 
    let dayLength = 12; // simplified (exact auto later)

    let segment = dayLength / 8;

    const rahuOrder = [7,1,6,4,5,3,2];
    const yamaOrder = [5,3,2,1,7,6,4];
    const guliOrder = [6,4,3,2,1,7,5];

    function period(num) {
        let from = todaySunrise + segment*(num-1);
        let to = from + segment;
        return `${from.toFixed(2)} - ${to.toFixed(2)}`
    }

    return {
        rahukaal: period(rahuOrder[weekday]),
        yama: period(yamaOrder[weekday]),
        gulika: period(guliOrder[weekday])
    };
}

/* ----------------------------------------
   AI TIME ADVISOR ENGINE
---------------------------------------- */
function aiAdvisor(p) {
    let advice = "";

    if (p.tithi.includes("Ekadashi"))
        advice += "‡§Ü‡§ú ‡§â‡§™‡§µ‡§æ‡§∏ ‡§î‡§∞ ‡§Ü‡§ß‡•ç‡§Ø‡§æ‡§§‡•ç‡§Æ‡§ø‡§ï ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§∂‡•ç‡§∞‡•á‡§∑‡•ç‡§† ‡§∞‡§π‡•á‡§Ç‡§ó‡•á‡•§‚ö°<br>";

    if (p.nakshatra === "Rohini" || p.nakshatra === "Pushya")
        advice += "‡§Ü‡§ú ‡§∂‡•Å‡§≠ ‡§ï‡§æ‡§∞‡•ç‡§Ø, ‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞, ‡§ñ‡§∞‡•Ä‡§¶‡§æ‡§∞‡•Ä ‡§ï‡§æ ‡§â‡§§‡•ç‡§§‡§Æ ‡§Ø‡•ã‡§ó ‡§π‡•à.‚ú®<br>";

    if (p.yoga === "Siddhi")
        advice += "‡§Ü‡§ú ‡§ï‡§æ ‡§¶‡§ø‡§® ‡§∏‡§´‡§≤‡§§‡§æ ‡§¶‡§ø‡§≤‡§æ‡§®‡•á ‡§µ‡§æ‡§≤‡§æ ‡§π‡•à. üöÄ<br>";

    if (p.yoga === "Vyatipata")
        advice += "‡§∏‡§æ‡§µ‡§ß‡§æ‡§®‡•Ä ‡§∞‡§ñ‡•á‡§Ç ‚Äî ‡§µ‡§ø‡§µ‡§æ‡§¶/‡§§‡§®‡§æ‡§µ ‡§∏‡•á ‡§¶‡•Ç‡§∞ ‡§∞‡§π‡•á‡§Ç. ‚ö†Ô∏è<br>";

    // Trading guidance
    if (p.weekday === "Monday")
        advice += "‡§∏‡•ã‡§Æ‡§µ‡§æ‡§∞ ‡§ï‡•ã market ‡§•‡•ã‡§°‡§º‡§æ slow ‡§∞‡§π‡§§‡§æ ‡§π‡•à ‚Äî scalping better. üìâüìà<br>";

    if (p.weekday === "Thursday")
        advice += "‡§ó‡•Å‡§∞‡•Å‡§µ‡§æ‡§∞ ‡§ï‡•ã bank-nifty strong moves ‡§¶‡•á ‡§∏‡§ï‡§§‡§æ ‡§π‡•à.üî•<br>";

    return advice || "‡§Ü‡§ú ‡§ï‡§æ ‡§¶‡§ø‡§® ‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§≤‡•á‡§ï‡§ø‡§® ‡§∂‡§æ‡§Ç‡§§‡§ø‡§™‡•Ç‡§∞‡•ç‡§£ ‡§∞‡§π‡•á‡§ó‡§æ.";
}

/* ----------------------------------------
   STOPWATCH
---------------------------------------- */
let swTime = 0, swInterval;
function startSW() {
    swInterval = setInterval(()=> {
        swTime++;
        document.getElementById("sw").innerHTML = swTime+" sec";
    },1000);
}
function stopSW(){ clearInterval(swInterval); }
function resetSW(){ swTime=0; document.getElementById("sw").innerHTML = "0 sec"; }

/* ----------------------------------------
   TIMER
---------------------------------------- */
let timerInt;
function startTimer() {
    let t = parseInt(document.getElementById("timerInput").value);
    timerInt = setInterval(()=> {
        if(t<=0) { clearInterval(timerInt); alert("Timer Over!"); }
        document.getElementById("timer").innerHTML = t-- + " sec";
    },1000);
}

/* ----------------------------------------
   ALARM
---------------------------------------- */
function setAlarm() {
    let a = document.getElementById("alarmTime").value;

    setInterval(()=> {
        let now = new Date();
        let h = String(now.getHours()).padStart(2,'0');
        let m = String(now.getMinutes()).padStart(2,'0');

        if(`${h}:${m}` === a){
            alert("‚è∞ ALARM!");
        }
    },1000);
}

/* ----------------------------------------
   World Clock (Top cities)
---------------------------------------- */
function worldClock() {
    let zones = {
        "New York": -10.5, "London": -5.5, "Dubai": -1.5,
        "Tokyo": 3.5, "Sydney": 5.5, "Moscow": -3.5,
        "Singapore": 2.5, "Bangkok": 1.5, "Kathmandu": 0.25
    };

    let base = new Date().getTime();
    let html = "";

    Object.keys(zones).forEach(z=>{
        let dt = new Date(base + zones[z]*3600*1000);
        html += `<b>${z}:</b> ${dt.toUTCString().slice(17,25)}<br>`;
    });

    document.getElementById("wclock").innerHTML = html;
}
setInterval(worldClock, 1000);

/* ----------------------------------------
   Festival Engine (Basic)
---------------------------------------- */
function getFestival(d, m) {
    let list = {
        "14-1":"Makar Sankranti",
        "26-1":"Republic Day",
        "8-3":"Mahashivratri",
        "25-3":"Holi",
        "21-4":"Ram Navami",
        "11-8":"Raksha Bandhan",
        "15-8":"Independence Day",
        "2-11":"Diwali"
    };

    return list[`${d}-${m}`] || "No major festival today";
}

/* ----------------------------------------
   Bind Everything On Screen
---------------------------------------- */
function updateSAMAY() {
    let now = new Date();
    let jd = toJulian(now);
    let base = generatePanchang();

    let sun = sunCalc(now, 20.3, 85.8); // Odisha approx (change later)
    let kala = getKala(now);

    document.getElementById("sunrise2").innerHTML = sun.sunrise;
    document.getElementById("sunset2").innerHTML = sun.sunset;

    document.getElementById("rahukaal").innerHTML = kala.rahukaal;
    document.getElementById("yama").innerHTML = kala.yama;
    document.getElementById("gulika").innerHTML = kala.gulika;

    document.getElementById("festival").innerHTML =
        getFestival(now.getDate(), now.getMonth()+1);

    document.getElementById("advice").innerHTML =
        aiAdvisor(base);
}
setInterval(updateSAMAY, 2000);
updateSAMAY();

</script>

<!--  ======  FINAL UI BLOCKS  ====== -->

<div class="card">
  <h2>üìå Sunrise / Sunset</h2>
  Sunrise: <span id="sunrise2"></span><br>
  Sunset: <span id="sunset2"></span>
</div>

<div class="card">
  <h2>üïØ Rahukaal / Yamaganda / Gulikaal</h2>
  Rahukaal: <span id="rahukaal"></span><br>
  Yamaganda: <span id="yama"></span><br>
  Gulikaal: <span id="gulika"></span>
</div>

<div class="card">
  <h2>üìÖ Festival Today</h2>
  <span id="festival"></span>
</div>

<div class="card">
  <h2>ü§ñ AI Time Advisor</h2>
  <div id="advice"></div>
</div>

<div class="card">
  <h2>üåç World Clock</h2>
  <div id="wclock"></div>
</div>

<div class="card">
  <h2>‚è± Stopwatch</h2>
  <div id="sw">0 sec</div>
  <button onclick="startSW()" class="btn">Start</button>
  <button onclick="stopSW()" class="btn">Stop</button>
  <button onclick="resetSW()" class="btn">Reset</button>
</div>

<div class="card">
  <h2>‚è≤ Timer</h2>
  <input id="timerInput" type="number" placeholder="Seconds">
  <button onclick="startTimer()" class="btn">Start</button>
  <div id="timer"></div>
</div>

<div class="card">
  <h2>‚è∞ Alarm</h2>
  <input id="alarmTime" type="time">
  <button onclick="setAlarm()" class="btn">Set</button>
</div>
